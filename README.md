![Python 3.13](https://img.shields.io/badge/python-3.13-blue)
![Poetry 2.1.3](https://img.shields.io/badge/poetry-2.1.3-yellow)
![Pytest 8.3.5](https://img.shields.io/badge/pytest-8.3.5-yellow)
![Pytest-cov 6.1.1](https://img.shields.io/badge/pytest_cov-6.1.1-yellow)

# Учебный проект: Банковские операции пользователя

Учебный проект по разработке виджета банковских операций на языке Python (версия 3.13 и выше). 

Цель проекта — закрепить знания полученные при обучении. 

Для управления зависимостями и изоляции окружения используется Poetry.

Для тестирования и сбора-метрик покрытия кода используются Pytest и Pytest-cov

---

## Содержание

- [Описание проекта](#описание-проекта)
- [Требования](#требования)
- [Установка](#установка)
- [Структура проекта](#структура-проекта)
- [Примеры использования](#примеры-использования)
- [Тестирование](#тестирование)

---

## Описание проекта

Разрабатывается виджет, который показывает несколько последних успешных банковских операций клиента.

В рамках данного проекта реализованы:

- Маскировка счета\банковской карты пользователя.
- Сортировка операций по дате и статусу выполнения операции.

---

## Требования

- Python ≥ 3.13  
- Poetry ≥ 2.1.3 

---

## Установка

1. **Клонировать репозиторий**  
    ```bash
   git clone https://github.com/asskelo/study.git
   cd study
    ```
2. **Установить зависимости через Poetry**  
    ```bash
   poetry install
    ```
3. **Активировать виртуальное окружение**  
   ```bash
   poetry shell
   ```
---

## Структура проекта

```csharp
study/
├── README.md               # Описание проекта
├── pyproject.toml          # Конфигурация Poetry и метаданные проекта
├── poetry.lock             # Зафиксированные версии зависимостей
├── src/                    # Пакет с реализацией
│   ├── __init__.py
│   ├── masks.py            # Модуль маскировки счета\банковской карты
│   ├── processing.py       # Модуль сортировки операций и дат
│   └── widget.py           # Модуль обработки счетов\банковских карт
├── tests/                  # Пакет unit-тестов
│   ├── __init__.py         
│   ├── conftest.py         # Общие фикстуры для всех тестов
│   ├── test_masks.py       # Тестирование модуля masks 
│   ├── test_processing.py  # Тестирование модуля processing
│   └── test_widget.py      # Тестирование модуля widget
└── .gitignore              # Игнорируемые файлы Git
```

---

## Примеры использования:
```Python
from src import masks, processing, widget

print(masks.get_mask_account("7000792289606361"))                 #-> **6361
print(widget.mask_account_card("Visa Platinum 8990922113665229")) #-> Visa Platinum 8990 92** **** 5229
print(widget.get_date("2024-03-11T02:26:18.671407"))              #-> 11.03.2024

print(
    processing.filter_by_state(
        [
            {'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
            {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'},
            {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'},
            {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'},
        ],
        'CANCELED',
    )
)

#Вывод:
#[{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, 
#{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]

print(
    processing.sort_by_date(
        [
            {'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
            {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'},
            {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'},
            {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'},
        ],
        False,
    )
)

#Вывод:
#[{'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}, 
#{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, 
#{'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}, 
#{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}]
```

## Тестирование

В проекте используются `pytest` и `pytest-cov` для юнит-тестирования и сбора метрик покрытия кода.

### Запуск тестов

- **Быстрый запуск всех тестов:**
```bash
  poetry run pytest
```
-**HTML-отчёт (в папке htmlcov/):**
```bash
   poetry run pytest --cov=src --cov-report=html
```

### Цель покрытия: ≥ 80 %